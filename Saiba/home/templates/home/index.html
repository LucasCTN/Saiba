{% extends 'home/base.html' %}

{% block body %}
    <section id="posts" class="container col-md-12">
        <div class="container col-md-12">
            {% for post in posts %}
                <div id="post-{{ post.pk }}" class='post'>
                    <h3>{{ post.category }} - {{ post.title }}</h3>

                    {% if post.video != None %}
                        {% if post.entry == None and post.image == None %}
                            <iframe width="560" height="315" src="{{ post.video.link }}" frameborder="0" allowfullscreen></iframe>
                            <br/><br/>
                        {% else %}
                            <div class="alert alert-warning">
                                <strong>Alerta!</strong> Foi postado alguma outra midia juntamente ao video e este teve que ser removido. Por favor resolva este conflito imediatamente.
                            </div>
                        {% endif %}
                    {% endif %}

                    {% if post.entry != None %}
                        <a href="{% url 'entry:detail' post.entry.slug %}">
                    {% elif post.image != None%}
                        <a href="{% url 'gallery:image_detail' post.image.pk %}">
                    {% endif %}

                    {% if post.image != None%}
                            <img id='imagem' class='media-object img-thumbnail' src='{{ post.image.file.url }}' style="width: 550px; height: 375px">
                        </a>
                        <br/>
                    {% elif post.entry != None %}
                            <img id='imagem' class='media-object img-thumbnail' src='{{ post.entry.icon.url }}' style="width: 550px; height: 375px">
                        </a>
                        <br/>
                    {% endif %}

                    {% if post.content != None %}
                        {{ post.content }}
                    {% endif %}
                    
                    <br/>
                    <h6>Data: {{ post.date }}</h6>
                </div>
                <hr>
            {% endfor %}
        </div>

        <form class="form-horizontal col-md-12" role="form" action="" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {% include 'home/form_template.html'%}
            <button type="submit" class="btn btn-primary" name="submit">Enviar</button>
        </form>
    </section>
{% endblock %}